<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>matching type</title>
    <link rel="stylesheet" href="application.css">
    <link rel="stylesheet" href="application dep.css">
            <link href="https://fonts.googleapis.com/css2?family=Jersey+15&display=swap" rel="stylesheet">   

</head>
<body>

<div class="paper-background">
    <header class="site-header">
        <h1 class="course-title" 
        style="font-family: 'Jersey 15';
        font-weight: normal;
">
APPLICATION DEVELOPMENT AND EMERGING TECHNOLOGIES
</h1>
                <div class="progress-container">
    <div class="progress-bar" id="progress"></div>
        </div>
        <h2 class="page-title"        style="font-family: 'Jersey 15';
        font-weight: normal;
        font-size: 25px;
">Matching Type</h2>
    </header>

    <main class="quiz-app-container">
        <div class="matching-wrapper">

            <!-- QUESTIONS -->
            <table>
                <tbody>
                    <tr><td><div class="card" data-match="1">The function that runs only once at the beginning of an Arduino program.</div></td></tr>
                    <tr><td><div class="card" data-match="2">What is the most commonly used Arduino board for beginners?</div></td></tr>
                    <tr><td><div class="card" data-match="3">Which pin on the Arduino is used for ground connection?</div></td></tr>
                </tbody>
            </table>

            <!-- ANSWERS -->
            <table>
                <tbody>
                    <tr><td><div class="card" data-match="1">setup()</div></td></tr>
                    <tr><td><div class="card" data-match="2">Arduino Uno</div></td></tr>
                    <tr><td><div class="card" data-match="3">GND</div></td></tr>
                </tbody>
            </table>

        </div> <!-- end wrapper -->
    </main>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

  const leftCards = document.querySelectorAll("table:first-of-type .card");
  const rightCards = document.querySelectorAll("table:last-of-type .card");

  let firstCard = null;
  let lock = false;

  /* -------------------------
     PROGRESS BAR VARIABLES
  ------------------------- */
  let progressCurrent = 0;
  const progressBar = document.getElementById("progress");

  function updateProgress(value) {
      progressBar.style.width = value + "%";
  }

  /* ------------------------- */

  function resetWrong(card1, card2) {
    setTimeout(() => {
      card1.classList.remove("selected", "wrong");
      card2.classList.remove("selected", "wrong");
      firstCard = null;
      lock = false;
    }, 700);
  }

  function markMatched(card1, card2) {

    card1.classList.add("matched");
    card2.classList.add("matched");
    card1.classList.remove("selected");
    card2.classList.remove("selected");
    firstCard = null;
    lock = false;

    /* -------------------------------
       UPDATE PROGRESS
       total pairs = 3
    ------------------------------- */
    const matchedPairs = document.querySelectorAll(".card.matched").length / 2;

    if (matchedPairs === 1) progressCurrent = 33;   // 1st match
    if (matchedPairs === 2) progressCurrent = 66;   // 2nd match
    if (matchedPairs === 3) progressCurrent = 100;  // all matched

    updateProgress(progressCurrent);
    /* ------------------------------- */

    // AUTO CHECK: all matched?
    const totalCards = document.querySelectorAll(".card").length;
    const matchedCards = document.querySelectorAll(".card.matched").length;

    if (matchedCards === totalCards) {
        const score = matchedCards / 2;
        localStorage.setItem("quizScore", score);

        setTimeout(() => {
            window.location.href = "../matching-type/your score.html";
        }, 800);
    }
  }

  function handleCardClick(card, side) {
    if (lock || card.classList.contains("matched")) return;

    if (!firstCard) {
      firstCard = { element: card, side };
      card.classList.add("selected");
      return;
    }

    if (firstCard.side === side) return;

    const first = firstCard.element;
    card.classList.add("selected");

    if (first.dataset.match === card.dataset.match) {

      first.classList.add("correct");
      card.classList.add("correct");

      setTimeout(() => {
        first.classList.remove("correct");
        card.classList.remove("correct");
        markMatched(first, card);
      }, 500);

    } else {
      first.classList.add("wrong");
      card.classList.add("wrong");
      lock = true;
      resetWrong(first, card);
    }
  }

  leftCards.forEach(card =>
    card.addEventListener("click", () => handleCardClick(card, "left"))
  );

  rightCards.forEach(card =>
    card.addEventListener("click", () => handleCardClick(card, "right"))
  );

});
</script>


</body>
</html>
